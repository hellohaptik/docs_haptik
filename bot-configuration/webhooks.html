<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>bot-configuration/webhooks · Haptik Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Webhooks"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="bot-configuration/webhooks · Haptik Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.haptik.ai/"/><meta property="og:description" content="# Webhooks"/><meta property="og:image" content="https://docs.haptik.ai/img/image_0.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.haptik.ai/img/image_0.png"/><link rel="shortcut icon" href="/img/image_0.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-106563119-6', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="/js/index.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/image_0.png" alt="Haptik Docs"/><h2 class="headerTitleWithLogo">Haptik Docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/#tools" target="_self">Tools</a></li><li class=""><a href="/#integrations" target="_self">Integrations</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">bot-configuration/webhooks</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="webhooks"></a><a href="#webhooks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Webhooks</h1>
<h2><a class="anchor" aria-hidden="true" id="receive-message-via-registered-webhook"></a><a href="#receive-message-via-registered-webhook" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Receive Message via Registered Webhook</h2>
<p>The Haptik Platform sends an event to your registered webhook whenever a bot or an agent has a message for the user.</p>
<p><b>Note</b>: Your webhook must be a single <code>HTTPS</code> endpoint exposed by you that accepts <code>POST</code> requests.</p>
<p>All messages sent from Haptik Platform to your registered webhook will always be in <code>JSON</code> format.</p>
<table border="1" class="docutils">
   <thead>
      <tr>
         <th>Property Name</th>
         <th>Description</th>
      </tr>
   </thead>
   <tbody>
      <tr>
         <td>version</td>
         <td>Webhook version</td>
      </tr>
      <tr>
         <td>timestamp</td>
         <td>ISO timestamp denoting when the webhook request was created in the haptik system</td>
      </tr>
      <tr>
         <td>user</td>
         <td>All user info will be available here</td>
      </tr>
      <tr>
         <td>user.auth_id</td>
         <td>This is an alphanumeric user identifier from your system.</td>
      </tr>
      <tr>
         <td>user.device_platform</td>
         <td>This is a numeric indentifier for the device platform. It is 5 for Web SDK users and 13 for Webhoook based users</td>
      </tr>
      <tr>
         <td>business_id</td>
         <td>Business id is a unique numeric indentifier for your business, provided by Haptik.</td>
      </tr>
      <tr>
         <td>event_name</td>
         <td>Possible Values: message, chat_pinned and chat_complete.</td>
      </tr>
      <tr>
         <td>agent</td>
         <td>All agent info will be available here</td>
      </tr>
      <tr>
         <td>agent.id</td>
         <td>Unique indentifier for the agent.</td>
      </tr>
      <tr>
         <td>agent.name</td>
         <td>Name of the agent or bot who sent the message. Gogo is an internal name for our ai engine.</td>
      </tr>
      <tr>
         <td>agent.profile_image</td>
         <td>URL for the agent profile image.</td>
      </tr>
      <tr>
         <td>agent.is_automated</td>
         <td>Whether the reply was automated or not. It will be false if agent sent the reply</td>
      </tr>
      <tr>
         <td>message</td>
         <td>All message info will be available here</td>
      </tr>
      <tr>
         <td>message.id</td>
         <td>Unique numeric identifier for messages</td>
      </tr>
      <tr>
         <td>message.body</td>
         <td>
         Will comprize of HSL elements. For a complete description of HSL elements refer 
         <a href="https://haptik-docs.readthedocs.io/en/latest/bot-builder-advanced/index.html">here</a>
         </td>
      </tr>
    </tbody>
</table>
<ol>
<li><p><b>Messages | (event_name = message)</b></p>
<p>A standard message event to emit a message from either an agent or a bot.</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0"</span>,
  <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"2018-10-04T12:41:27.980Z"</span>,
  <span class="hljs-attr">"user"</span>: {
    <span class="hljs-attr">"auth_id"</span>: <span class="hljs-string">"&lt;AUTH_ID&gt;"</span>,
    <span class="hljs-attr">"device_platform"</span>: <span class="hljs-string">"&lt;DEVICE_PLATFORM&gt;"</span>
  },
  <span class="hljs-attr">"business_id"</span>: <span class="hljs-number">343</span>,
  <span class="hljs-attr">"event_name"</span>: <span class="hljs-string">"message"</span>,
  <span class="hljs-attr">"agent"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">4415</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"gogo"</span>,
    <span class="hljs-attr">"profile_image"</span>: <span class="hljs-string">"https://assets.haptikapi.com/content/42e123411bk1109823bf.jpg"</span>,
    <span class="hljs-attr">"is_automated"</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">"message"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">1982371</span>,
    <span class="hljs-attr">"body"</span>: {
      <span class="hljs-attr">"text"</span>: <span class="hljs-string">"Hi"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TEXT"</span>,
      <span class="hljs-attr">"data"</span>: {
        <span class="hljs-attr">"quick_replies"</span>: []
      }
    }
  }
}
</code></pre></li>
<li><p><b>Chat Agent Pinned | (event_name = chat_pinned)</b></p>
<p>A chat has been assigned to an agent</p>
<p>Example:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0"</span>,
  <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"2018-10-04T12:41:27.980Z"</span>,
  <span class="hljs-attr">"user"</span>: {
    <span class="hljs-attr">"auth_id"</span>: <span class="hljs-string">"&lt;AUTH_ID&gt;"</span>,
    <span class="hljs-attr">"device_platform"</span>: <span class="hljs-string">"&lt;DEVICE_PLATFORM&gt;"</span>
  },
  <span class="hljs-attr">"business_id"</span>: <span class="hljs-number">343</span>,
  <span class="hljs-attr">"event_name"</span>: <span class="hljs-string">"chat_pinned"</span>,
  <span class="hljs-attr">"agent"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">235</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Prateek"</span>,
    <span class="hljs-attr">"profile_image"</span>: <span class="hljs-string">"https://assets.haptikapi.com/content/42e123411bk1109823bf.jpg"</span>,
    <span class="hljs-attr">"is_automated"</span>: <span class="hljs-literal">false</span>
  },
  <span class="hljs-attr">"message"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">1982314</span>,
    <span class="hljs-attr">"body"</span>: {
      <span class="hljs-attr">"text"</span>: <span class="hljs-string">"Prateek has entered the Conversation"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"SYSTEM"</span>,
      <span class="hljs-attr">"data"</span>: {}
    }
  }
}
</code></pre></li>
<li><p><b>Chat Complete | (event_name = chat_complete)</b></p>
<p>A chat has been marked as complete either by a bot or by an agent. When a chat is marked complete any assigned agent is cleared.</p>
<p>Example:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0"</span>,
  <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"2018-10-04T12:41:27.980Z"</span>,
  <span class="hljs-attr">"user"</span>: {
    <span class="hljs-attr">"auth_id"</span>: <span class="hljs-string">"&lt;AUTH_ID&gt;"</span>,
    <span class="hljs-attr">"device_platform"</span>: <span class="hljs-string">"&lt;DEVICE_PLATFORM&gt;"</span>
  },
  <span class="hljs-attr">"business_id"</span>: <span class="hljs-number">343</span>,
  <span class="hljs-attr">"event_name"</span>: <span class="hljs-string">"chat_complete"</span>,
  <span class="hljs-attr">"agent"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">4415</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"gogo"</span>,
    <span class="hljs-attr">"profile_image"</span>: <span class="hljs-string">"https://assets.haptikapi.com/content/42e123411bk1109823bf.jpg"</span>,
    <span class="hljs-attr">"is_automated"</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">"message"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">1982471</span>,
    <span class="hljs-attr">"body"</span>: {
      <span class="hljs-attr">"text"</span>: <span class="hljs-string">"The conversation has been completed"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"SYSTEM"</span>,
      <span class="hljs-attr">"data"</span>: {}
    }
  }
}
</code></pre></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="validate-webhook-for-security"></a><a href="#validate-webhook-for-security" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Validate Webhook for security</h3>
<p>The HTTP request will contain an <code>X-Hub-Signature</code> header which contains the SHA1 signature of the request payload computed using the HMAC algorithm and the secret_key shared in advance, and prefixed with <code>sha1=</code>.</p>
<p>Your callback endpoint should verify this signature to validate the integrity and origin of the payload.</p>
<h3><a class="anchor" aria-hidden="true" id="webhook-performance-requirements"></a><a href="#webhook-performance-requirements" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Webhook Performance Requirements</h3>
<p>Your webhook should meet the following minimum performance requirements</p>
<ul>
<li>Respond to all webhook events with a <code>200</code> OK</li>
<li>Respond to all webhook events in <code>5</code> seconds or less</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="implemented-fallbacks"></a><a href="#implemented-fallbacks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implemented FallBacks</h4>
<p><b>If any of the below 3 conditions are observed</b></p>
<ol>
<li>We cannot connect to your webhook</li>
<li>Your webhook takes more than <code>5</code> seconds to return the response</li>
<li>Your webhook returns non 2xx status code</li>
</ol>
<p><b>then</b></p>
<p>We will retry the request 6 times over the course of <code>60 minutes</code> (Retry intervals: 5 seconds, 25 seconds, 125 seconds, 625 seconds, 1410 seconds, 1410 seconds).</p>
<p>If the webhook call is unsuccessful even after the last attempt then it will be dropped and we will automatically disable the webhook.</p>
<p>Once the webhook is disabled, then new requests will be queued for a max duration of <code>60 minutes</code>. Once the webhook is enabled by you, then we will attempt to deliver the request.</p>
<p>You can visit the Haptik Dashboard or use the <a href="#enable-webhook-via-rest-api">REST API</a> to activate the webhook if it is disabled.</p>
<p><b>Note:</b> There can be multiple delivery requests within a short time span and it is <code>your responsibility</code> to maintain ordering and QoS in case of failure to accept messages.</p>
<h3><a class="anchor" aria-hidden="true" id="support-for-rich-messaging"></a><a href="#support-for-rich-messaging" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for Rich Messaging</h3>
<p>The Haptik Platform is capable of supporting <a href="https://haptik-docs.readthedocs.io/en/latest/bot-builder-advanced/index.html">rich messaging elements</a> such as Carousels, Buttons, Images and dozens more. Please get in touch with the technical support team for a complete list of rich messaging elements and details on adding support for your platform.</p>
<h2><a class="anchor" aria-hidden="true" id="create-or-update-users-in-the-haptik-system-via-rest-api"></a><a href="#create-or-update-users-in-the-haptik-system-via-rest-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create or Update Users in the Haptik System via REST API</h2>
<p>During message logging, you will provide Haptik with a unique id for every user (auth_id). This is supposed to be the unique identifier for the user in your system.
Before sending the message to Haptik, you need to register the user and provide optional user details such as name, mobile number, email etc.</p>
<p>The User API allows you to register the user via a <code>POST</code> request to the Haptik Platform.</p>
<p>If the user with auth_id already exists then the user details will be updated in Haptik's system automatically.</p>
<p>The URL for user creation is generated on the Haptik Platform Dashboard.</p>
<p>Example URL</p>
<p><code>https://staging-messenger.haptikapi.com/v1.0/user/</code></p>
<h4><a class="anchor" aria-hidden="true" id="headers"></a><a href="#headers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Headers</h4>
<pre><code class="hljs"><span class="hljs-symbol">Authorization:</span> Bearer <span class="hljs-params">&lt;TOKEN&gt;</span>
client-id: <span class="hljs-params">&lt;CLIENT_ID&gt;</span>
Content-Type: application/json
</code></pre>
<ul>
<li>Authorization - The Authorization header of each HTTP request should be “Bearer” followed by your token which will be provided by Haptik</li>
<li>client-id - The client id for your account which will be provided by Haptik</li>
<li>Content-Type - application/json</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="request"></a><a href="#request" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request</h4>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"auth_id"</span>: <span class="hljs-string">"&lt;AUTH_ID&gt;"</span>,
  <span class="hljs-attr">"auth_code"</span>: <span class="hljs-string">"&lt;AUTH_CODE&gt;"</span>,
  <span class="hljs-attr">"mobile_no"</span>: <span class="hljs-string">"&lt;MOBILE_NO&gt;"</span>,
  <span class="hljs-attr">"email"</span>: <span class="hljs-string">"&lt;EMAIL&gt;"</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"&lt;NAME&gt;"</span>
}
</code></pre>
<ul>
<li>auth_id - This is an alphanumeric User identifier from your System</li>
<li>auth_code - We treat this value as the client token (optional)</li>
<li>mobile_no - Mobile no of the user (optional)</li>
<li>email - Email of the user (optional)</li>
<li>name - Name of the user (optional)</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="response"></a><a href="#response" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response</h4>
<p>A successful request to the user creation API will return a <code>200</code> status code with a JSON response object.</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"auth_id"</span>: <span class="hljs-string">"&lt;AUTH_ID&gt;"</span>,
  <span class="hljs-attr">"mobile_no"</span>: <span class="hljs-string">"&lt;MOBILE_NO&gt;"</span>,
  <span class="hljs-attr">"email"</span>: <span class="hljs-string">"&lt;EMAIL&gt;"</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"&lt;NAME&gt;"</span>
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="error-response"></a><a href="#error-response" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error Response</h4>
<p>If the Authorization header is missing or invalid, then the API will return a <code>401</code> status code.</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"error_message"</span>: <span class="hljs-string">"invalid authorization details"</span>
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="sample-curl-command"></a><a href="#sample-curl-command" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample CURL command</h4>
<pre><code class="hljs">curl -X POST \
   https:<span class="hljs-comment">//staging-messenger.haptikapi.com/v1.0/user/ \</span>
  -H <span class="hljs-string">'Authorization: Bearer &lt;TOKEN&gt;'</span> \
  -H <span class="hljs-string">'client-id: &lt;CLIENT_ID&gt;'</span> \
  -H <span class="hljs-string">'Content-Type: application/json'</span> \
  -d <span class="hljs-string">'{"</span>auth_id<span class="hljs-string">": "</span>&lt;AUTH_ID&gt;<span class="hljs-string">", "</span>name<span class="hljs-string">": "</span>guest user<span class="hljs-string">"}'</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="log-message-to-haptik-system-via-rest-api"></a><a href="#log-message-to-haptik-system-via-rest-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Log Message to Haptik System via REST API</h2>
<p>The Log Message API allows you to send messages via a <code>POST</code> request to the Haptik Platform. The URL for message logging is generated on the Haptik Platform Dashboard.</p>
<p>Example URL</p>
<p><code>https://staging-messenger.haptikapi.com/v1.0/log_message_from_user/</code></p>
<h4><a class="anchor" aria-hidden="true" id="headers-1"></a><a href="#headers-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Headers</h4>
<pre><code class="hljs"><span class="hljs-symbol">Authorization:</span> Bearer <span class="hljs-params">&lt;TOKEN&gt;</span>
client-id: <span class="hljs-params">&lt;CLIENT_ID&gt;</span>
Content-Type: application/json
</code></pre>
<ul>
<li>Authorization - The Authorization header of each HTTP request should be “Bearer” followed by your token which will be provided by Haptik</li>
<li>client-id - The client id for your account which will be provided by Haptik</li>
<li>Content-Type - application/json</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="request-1"></a><a href="#request-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request</h4>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"user"</span>: {
    <span class="hljs-attr">"auth_id"</span>: <span class="hljs-string">"&lt;AUTH_ID&gt;"</span>
  },
  <span class="hljs-attr">"message_body"</span>: <span class="hljs-string">"&lt;MESSAGE_BODY&gt;"</span>,
  <span class="hljs-attr">"message_type"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">"business_id"</span>: <span class="hljs-number">343</span>
}
</code></pre>
<ul>
<li>auth_id - This is an alphanumeric User identifier from your system</li>
<li>business_id - This is a numeric identifier for channel/queue that you wish to register the message on.</li>
<li>message_body - The message body containing the message to be sent to the bot or agent.</li>
<li>message_type - This defines the processing pipeline for messages, standard messages are of type <code>0</code></li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="response-1"></a><a href="#response-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response</h4>
<p>A successful request to the log message sent API will return a <code>200</code> status code with a JSON response object. It will contain a unique message id and other metadata about the message.</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"message_id"</span>: <span class="hljs-number">1411200492</span>,
  <span class="hljs-attr">"message_body"</span>: <span class="hljs-string">"&lt;MESSAGE_BODY&gt;"</span>,
  <span class="hljs-attr">"created_at"</span>: <span class="hljs-string">"2018-10-04T12:41:27.980Z"</span>,
  <span class="hljs-attr">"message_type"</span>: <span class="hljs-number">0</span>
}
</code></pre>
<ul>
<li>message_id - message id generated by haptik system</li>
<li>message_body - message body that was logged in the haptik system</li>
<li>created_at - ISO timestamp denoting when the message was created in the haptik system</li>
<li>message_type - This defines the processing pipeline for messages, standard messages are of type <code>0</code></li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="error-response-1"></a><a href="#error-response-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error Response</h4>
<p>If the user with auth_id is not registered, then the API will return a <code>403</code> status code.</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"error_message"</span>: <span class="hljs-string">"user is not registered"</span>
}
</code></pre>
<p>If the Authorization header is missing or invalid, then the API will return a <code>401</code> status code.</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"error_message"</span>: <span class="hljs-string">"invalid authorization details"</span>
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="sample-curl-command-1"></a><a href="#sample-curl-command-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample CURL command</h4>
<pre><code class="hljs">curl -X POST \
    https:<span class="hljs-comment">//staging-messenger.haptikapi.com/v1.0/log_message_from_user/ \</span>
  -H <span class="hljs-string">'Authorization: Bearer &lt;TOKEN&gt;'</span> \
  -H <span class="hljs-string">'client-id: &lt;CLIENT_ID&gt;'</span> \
  -H <span class="hljs-string">'Content-Type: application/json'</span> \
  -d <span class="hljs-string">'{
    "</span>message_body<span class="hljs-string">": "</span>&lt;MESSAGE_BODY&gt;<span class="hljs-string">",
    "</span>business_id<span class="hljs-string">": 343,
    "</span>message_type<span class="hljs-string">": 0,
    "</span>user<span class="hljs-string">": {"</span>auth_id<span class="hljs-string">": "</span>&lt;AUTH_ID&gt;<span class="hljs-string">"}
}'</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="image-upload"></a><a href="#image-upload" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Image Upload</h2>
<p>The Image upload API allows you to upload user images via a <code>POST</code> request to the Haptik Platform. The URL for image uploads is generated on the Haptik Platform Dashboard.</p>
<p>Example URL</p>
<p><code>https://staging-messenger.haptikapi.com/v1.0/log_file_from_user/</code></p>
<h4><a class="anchor" aria-hidden="true" id="headers-2"></a><a href="#headers-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Headers</h4>
<pre><code class="hljs"><span class="hljs-symbol">Authorization</span>: <span class="hljs-keyword">Bearer </span>&lt;TOKEN&gt;
<span class="hljs-symbol">client</span>-id: &lt;CLIENT_ID&gt;
<span class="hljs-symbol">Content</span>-Type: <span class="hljs-keyword">multipart/form-data; </span><span class="hljs-keyword">boundary=MultipartBoundry
</span></code></pre>
<ul>
<li>Authorization - The Authorization header of each HTTP request should be “Bearer” followed by your token which will be provided by Haptik</li>
<li>client-id - The client id for your account which will be provided by Haptik</li>
<li>Content-Type - multipart/form-data; boundary=MultipartBoundry</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="request-2"></a><a href="#request-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request</h4>
<pre><code class="hljs"><span class="hljs-comment">--MultipartBoundry</span>
Content-Disposition: form-data; <span class="hljs-built_in">name</span>=<span class="hljs-string">"auth_id"</span>
Content-Length: <span class="hljs-number">44</span>

&lt;AUTH_ID&gt;
<span class="hljs-comment">--MultipartBoundry</span>
Content-Disposition: form-data; <span class="hljs-built_in">name</span>=<span class="hljs-string">"business_id"</span>
Content-Length: <span class="hljs-number">3</span>

&lt;BUSINESS_ID&gt;
<span class="hljs-comment">--MultipartBoundry</span>
Content-Disposition: form-data; <span class="hljs-built_in">name</span>=<span class="hljs-string">"message_type"</span>
Content-Length: <span class="hljs-number">1</span>

<span class="hljs-number">1</span>
<span class="hljs-comment">--MultipartBoundry</span>
Content-Disposition: form-data; <span class="hljs-built_in">name</span>=<span class="hljs-string">"file"</span>; filename=<span class="hljs-string">"image.jpg"</span>
Content-Type: image/jpeg
Content-Length: <span class="hljs-number">151160</span>

<span class="hljs-built_in">contents</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> image
<span class="hljs-comment">--MultipartBoundry</span>
Content-Disposition: form-data; <span class="hljs-built_in">name</span>=<span class="hljs-string">"message_body"</span>
Content-Length: <span class="hljs-number">0</span>


<span class="hljs-comment">--MultipartBoundry--</span>
</code></pre>
<ul>
<li>auth_id - This is an alphanumeric User identifier from your system</li>
<li>business_id - This is a numeric identifier for channel/queue on which the message is to be registered.</li>
<li>message_type - The message type should be <code>1</code> for image</li>
<li>file - contents of the image (Supported extensions: jpeg, png). Max file size allowed is 10MB</li>
<li>message_body - message body that was logged in the haptik system</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="response-2"></a><a href="#response-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response</h4>
<p>A successful request will return a <code>200</code> status code with a JSON response object with a unique message id and other metadata about the messages.</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"message_id"</span>: <span class="hljs-number">1411200492</span>,
  <span class="hljs-attr">"message_body"</span>: <span class="hljs-string">"&lt;MESSAGE_BODY&gt;"</span>,
  <span class="hljs-attr">"created_at"</span>: <span class="hljs-string">"2018-10-04T12:41:27.980Z"</span>,
  <span class="hljs-attr">"message_type"</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">"file_url"</span>: <span class="hljs-string">"https://assets.haptikapi.com/content/42e123411bk1109823bf.jpg"</span>
}
</code></pre>
<ul>
<li>message_id - message id generated by haptik system</li>
<li>message_body - message body that was logged in the haptik system</li>
<li>created_at - ISO timestamp denoting when the message was created in the haptik system</li>
<li>message_type - The message type should be <code>1</code> for image</li>
<li>file_url - The url for the uploaded image</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="error-response-2"></a><a href="#error-response-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error Response</h4>
<p>If the user with auth_id is not registered, then the API will return a <code>403</code> status code.</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"error_message"</span>: <span class="hljs-string">"user is not registered"</span>
}
</code></pre>
<p>If the Authorization header is missing or invalid, then the API will return a <code>401</code> status code.</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"error_message"</span>: <span class="hljs-string">"invalid authorization details"</span>
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="sample-curl-command-2"></a><a href="#sample-curl-command-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample CURL command</h4>
<pre><code class="hljs">curl -X POST\
    https://staging-messenger.haptikapi.com/v1.0/log_file_from_user/ \
  -<span class="ruby">H <span class="hljs-string">'Authorization: Bearer &lt;TOKEN&gt;'</span> \
</span>  -<span class="ruby">H <span class="hljs-string">'client-id: &lt;CLIENT_ID&gt;'</span> \
</span>  -<span class="ruby">H <span class="hljs-string">'Content-Type: multipart/form-data'</span> \
</span>  -<span class="ruby">F <span class="hljs-string">"auth_id=&lt;AUTH_ID&gt;"</span> \
</span>  -<span class="ruby">F <span class="hljs-string">"business_id=&lt;BUSINESS_ID&gt;"</span> \
</span>  -<span class="ruby">F <span class="hljs-string">"message_type=1"</span> \
</span>  -<span class="ruby">F <span class="hljs-string">"file=@/home/user1/Desktop/test.jpg"</span> \
</span>  -<span class="ruby">F <span class="hljs-string">"message_body="</span>
</span></code></pre>
<h2><a class="anchor" aria-hidden="true" id="enable-webhook-via-rest-api"></a><a href="#enable-webhook-via-rest-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enable webhook via REST API</h2>
<p>If a single webhook call is unsuccessful after multiple retries, then the webhook is automatically disabled by Haptik.</p>
<p>You will have to use Enable webhook API to enable the webhook again via a <code>POST</code> request to the Haptik Platform.
The URL to enable webhook will be generated on the Haptik Platform Dashboard.</p>
<p>Example URL</p>
<p><code>https://staging-messenger.haptikapi.com/v1.0/webhook/</code></p>
<h4><a class="anchor" aria-hidden="true" id="headers-3"></a><a href="#headers-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Headers</h4>
<pre><code class="hljs"><span class="hljs-symbol">Authorization:</span> Bearer <span class="hljs-params">&lt;TOKEN&gt;</span>
client-id: <span class="hljs-params">&lt;CLIENT_ID&gt;</span>
Content-Type: application/json
</code></pre>
<ul>
<li>Authorization - The Authorization header of each HTTP request should be “Bearer” followed by your token which will be provided by Haptik</li>
<li>client-id - The client id for your account which will be provided by Haptik</li>
<li>Content-Type - application/json</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="request-3"></a><a href="#request-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request</h4>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"enabled"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"business_id"</span>: <span class="hljs-number">343</span>,
  <span class="hljs-attr">"device_platform"</span>: <span class="hljs-number">13</span>
}
</code></pre>
<ul>
<li>enabled - enabled should be true to enable the webhook again</li>
<li>business_id - This is a numeric identifier for channel/queue</li>
<li>device_platform - This is a numeric indentifier for the device platform. It is 5 for Web SDK users and 13 for Webhoook based users</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="response-3"></a><a href="#response-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response</h4>
<p>A successful request to the enable webhook API will return a <code>200</code> status code with a JSON response object.</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"enabled"</span>: <span class="hljs-literal">true</span>
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="error-response-3"></a><a href="#error-response-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error Response</h4>
<p>If the Authorization header is missing or invalid, then the API will return a <code>401</code> status code.</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"error_message"</span>: <span class="hljs-string">"invalid authorization details"</span>
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="sample-curl-command-3"></a><a href="#sample-curl-command-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample CURL command</h4>
<pre><code class="hljs">curl -X POST \
   https://staging-messenger.haptikapi.com/v1.0/webhook/ \
  -<span class="ruby">H <span class="hljs-string">'Authorization: Bearer &lt;TOKEN&gt;'</span> \
</span>  -<span class="ruby">H <span class="hljs-string">'client-id: &lt;CLIENT_ID&gt;'</span> \
</span>  -<span class="ruby">H <span class="hljs-string">'Content-Type: application/json'</span> \
</span>  -<span class="ruby">d <span class="hljs-string">'{"enabled": true}'</span>
</span></code></pre>
<h2><a class="anchor" aria-hidden="true" id="api-security"></a><a href="#api-security" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>API Security</h2>
<p>To access the Haptik API, you require a Haptik provided token. The Authorization header of each HTTP request should be “Bearer” followed by the token. If the Authorization header is missing or invalid, then 401 status code is returned.</p>
<p><b>Note:</b> You should never share your token with external parties</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2019-8-30</em></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#receive-message-via-registered-webhook">Receive Message via Registered Webhook</a><ul class="toc-headings"><li><a href="#validate-webhook-for-security">Validate Webhook for security</a></li><li><a href="#webhook-performance-requirements">Webhook Performance Requirements</a></li><li><a href="#support-for-rich-messaging">Support for Rich Messaging</a></li></ul></li><li><a href="#create-or-update-users-in-the-haptik-system-via-rest-api">Create or Update Users in the Haptik System via REST API</a></li><li><a href="#log-message-to-haptik-system-via-rest-api">Log Message to Haptik System via REST API</a></li><li><a href="#image-upload">Image Upload</a></li><li><a href="#enable-webhook-via-rest-api">Enable webhook via REST API</a></li><li><a href="#api-security">API Security</a></li></ul></nav></div><footer class="nav-footer" id="footer"><div class="footer"><a href="https://haptik.ai/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/image_0.png" alt="Haptik Inc." width="100"/></a><div class="footer-columns"><div class="footer-column"><div class="footer-column-title">Tools</div><div class="footer-column-links"><a href="https://docs.haptik.ai/bot-builder/basic/introduction" class="footer-column-link">Bot Builder</a><a href="https://docs.haptik.ai/agent-chat/" class="footer-column-link">Agent Chat</a><a href="https://docs.haptik.ai/bot-analytics/" class="footer-column-link">Analytics</a></div></div><div class="footer-column"><div class="footer-column-title">Integrations</div><div class="footer-column-links"><a href="https://hellohaptik.github.io/haptik-ios-framework" class="footer-column-link">iOS SDK</a><a href="https://hellohaptik.github.io/haptik-android-lib" class="footer-column-link">Android SDK</a><a href="https://hellohaptik.github.io/javascript_sdk" class="footer-column-link">Web SDK</a><a href="https://docs.haptik.ai/webhooks/" class="footer-column-link">Webhooks</a><a href="https://docs.haptik.ai/hsl/" class="footer-column-link">HSL</a></div></div><div class="footer-column"><div class="footer-column-title">Others</div><div class="footer-column-links"><a href="https://docs.haptik.ai/contributing/index" class="footer-column-link">Contributing</a><a href="https://docs.haptik.ai/other/security" class="footer-column-link">Security</a><a href="https://forms.gle/Z2SowBSFpWLayXQz9" class="footer-column-link">Support</a><a href="https://docs.haptik.ai/other/sla" class="footer-column-link">SLA</a></div></div></div><div class="footer-copyright"></div></div><section class="copyright">Copyright © 2019 Haptik Inc.</section></footer></div></body></html>